<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <link rel="stylesheet" href="/main.css"> -->
</head>
<body class="grey-bg">

  <%- include('nav.ejs') %>

    <!-- <%= JSON.stringify(posts) %> -->
    <!-- 
        server.jsì—ì„œ postsë¼ëŠ” ë³€ìˆ˜ë¡œ DBì— ìˆëŠ” ê²Œì‹œë¬¼ë“¤ì˜
        IDë¥¼ ë°›ì•„ì™”ìŒ
    -->

    <% for(let i = 0; i<posts.length; i++) { %>
      <div class="white-bg">
        <div class="list-box">
          <h4>
            <a href="/detail/<%= posts[i]._id %>" style="text-decoration: none;">
                <%= posts[i].title %>
            </a>
            <a href="/edit/<%= posts[i]._id %>" style="text-decoration: none;">âœï¸</a> 
            <span class="delete" data-id="<%= posts[i]._id %>">ğŸ—‘ï¸</span>
          </h4>
          <p> <%= posts[i].content %> </p>
        </div>
      </div>
    <% } %>

    <script>
      // ê° ì‚­ì œ ë²„íŠ¼ì— ëŒ€í•´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
      document.querySelectorAll('.delete').forEach(function(span) {
        span.addEventListener('click', function(e) {
          // í´ë¦­ëœ ë²„íŠ¼ì˜ ë°ì´í„° IDë¥¼ ê°€ì ¸ì™€ì„œ ì‚­ì œ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
          fetch('/delete?docid=' + e.target.dataset.id, {
            method: 'DELETE'
          });
        });
      });
    </script>
</body>
</html>




